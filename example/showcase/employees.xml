<?xml version="1.0" encoding="utf-8"?>
<program xmlns="http://www.obidea.com/ns/termal#"
   xmlns:tml="http://www.obidea.com/ns/termal#"
   xmlns:rr="http://www.w3.org/ns/r2rml#">
   <prefix tml:name="" tml:ns="http://obidea.com/ex/ontology/work/" />

   <uri-template tml:name="Department" tml:value="http://obidea.com/ex/ontology/work/department/{1}/" />
   <uri-template tml:name="Employee" tml:value="http://obidea.com/ex/ontology/work/employee/{1}/" />

   <mapping tml:id="TriplesMap1">
      <logical-table rr:tableName="employees"/>
      <subject-map rr:template="Employee(emp_no)"/>
      <predicate-object-map rr:predicate="birthDate" rr:column="birth_date"/>
      <predicate-object-map rr:predicate="firstName" rr:column="first_name"/>
      <predicate-object-map rr:predicate="lastName" rr:column="last_name"/>
      <predicate-object-map rr:predicate="gender" rr:column="gender"/>
      <predicate-object-map rr:predicate="hireDate" rr:column="hire_date"/>
   </mapping>
   <mapping tml:id="TriplesMap2">
      <logical-table rr:tableName="departments" />
      <subject-map rr:template="Department(dept_no)"/>
      <predicate-object-map rr:predicate="deptName" rr:column="dept_name"/>
      <predicate-object-map rr:predicate="about" rr:template="+dbpedia(dept_name)"/>
   </mapping>
   <mapping tml:id="TriplesMap3">
      <logical-table>
      <![CDATA[
        SELECT dept_manager.emp_no as employeeID
        FROM dept_manager, titles
        WHERE dept_manager.emp_no = titles.emp_no]]>
      </logical-table>
      <subject-map rr:class="Manager" rr:template="Employee(employeeID)"/>
   </mapping>
   <mapping tml:id="TriplesMap4">
      <logical-table>
      <![CDATA[
        SELECT dept_emp.emp_no as employeeID
        FROM dept_emp JOIN titles ON dept_emp.emp_no = titles.emp_no
        WHERE title = 'Staff']]>
      </logical-table>
      <subject-map rr:class="Staff" rr:template="Employee(employeeID)"/>
   </mapping>
   <mapping tml:id="TriplesMap5">
      <logical-table>
      <![CDATA[
        SELECT dept_emp.emp_no as employeeID
        FROM dept_emp JOIN titles ON dept_emp.emp_no = titles.emp_no
        WHERE title = 'Engineer']]>
      </logical-table>
      <subject-map rr:class="Engineer" rr:template="Employee(employeeID)"/>
      <comment>People who work as engineers</comment>
   </mapping>
   <mapping tml:id="TriplesMap6">
      <logical-table>
      <![CDATA[
        SELECT dept_emp.emp_no as employeeID
        FROM dept_emp JOIN titles ON dept_emp.emp_no = titles.emp_no
        WHERE title = 'Senior Engineer']]>
      </logical-table>
      <subject-map rr:class="SeniorEngineer" rr:template="Employee(employeeID)"/>
      <comment>
        People who work as senior engineers. This title is for all engineers who
        have worked in the company for more than 10 years.
      </comment>
   </mapping>
   <mapping tml:id="TriplesMap7">
      <logical-table rr:tableName="dept_emp"/>
      <subject-map rr:template="Employee(emp_no)"/>
      <predicate-object-map rr:predicate="worksIn" rr:template="Department(dept_no)"/>
   </mapping>
   <mapping tml:id="TriplesMap8">
      <logical-table rr:tableName="dept_manager"/>
      <subject-map rr:class="Manager" rr:template="Employee(emp_no)"/>
      <predicate-object-map rr:predicate="leads" rr:template="Department(dept_no)"/>
      <comment>
        The subject-map specifies the people who lead are from class Manager. All rows
        with emp_no values are managers.
      </comment>
   </mapping>
</program>